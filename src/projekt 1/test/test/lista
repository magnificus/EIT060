//fixar truststore

Skapar en nyckel
openssl genrsa -des3 -passout pass:password -out caRoot.key 1024

Skapar en certificate sign request med nyckeln skapad ovan
openssl req -new -key caRoot.key -subj /CN=CA -passin pass:password -out caRoot.csr

Signerar ovan skapade certifikat med ovan skapad nyckel. Dvs signera sig själv.
openssl x509 -req -days 365 -passin pass:password -in caRoot.csr -signkey caRoot.key -out caRoot.crt

skapar truststore innehållande ovan skapade självsignerade certifikat 
keytool -importcert -alias CA -storepass password -file caRoot.crt -keystore truststore.jks

//fixar client keystore
Genererar ett nyckelpar och lägger dom i en keystore
keytool -genkey -keystore  clientkeystore.jks -alias clientKey -storepass password -keypass password -dname "CN=<dat12ml1> Mikael Lindholm/x/x/x"

Skapar en certificate sign request med nyckeln skapad ovan
keytool -certreq -alias clientKey -storepass password -keyalg RSA -file clientkeystore.csr -keystore clientkeystore.jks

Signerar certification requestet med det självsignerade certifikatet

openssl x509 -req -days 360 -in clientkeystore.csr -CA caRoot.crt -CAkey caRoot.key -CAcreateserial -out clientkeystore.crt

importera root certifikatet till clientkeystore
keytool -import -trustcacerts -alias caRoot -file caRoot.crt -keystore clientkeystore.jks

importera det av rootCa signerade certifikatet till clientstore

keytool -import -trustcacerts -alias clientKey -file clientkeystore.crt -keystore clientkeystore.jks

//fixar server keystore (samma som clientkeystore men med olika alias, namn etc)

Genererar ett nyckelpar och lägger dom i en keystore
keytool -genkey -keystore  serverkeystore.jks -alias serverKey -storepass password -keypass password -dname "CN=<dat12ml1> Mikael Lindholm/x/x/x"

Skapar en certificate sign request med nyckeln skapad ovan
keytool -certreq -alias serverKey -storepass password -keyalg RSA -file serverkeystore.csr -keystore serverkeystore.jks

Signerar certification requestet med det självsignerade certifikatet

openssl x509 -req -days 360 -in serverkeystore.csr -CA caRoot.crt -CAkey caRoot.key -CAcreateserial -out serverkeystore.crt

importera root certifikatet till clientkeystore
keytool -import -trustcacerts -alias caRoot -file caRoot.crt -keystore serverkeystore.jks

importera det av rootCa signerade certifikatet till clientstore

keytool -import -trustcacerts -alias serverKey -file serverkeystore.crt -keystore serverkeystore.jks
      
      
      
      
      

